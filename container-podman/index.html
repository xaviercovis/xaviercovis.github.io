<!DOCTYPE html><html lang="en-US"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --><title>Découvrir Podman | XCO</title><meta name="generator" content="Jekyll v3.8.7" /><meta property="og:title" content="Découvrir Podman" /><meta name="author" content="GitHub User" /><meta property="og:locale" content="en_US" /><meta name="description" content="Table of Contents Introduccion" /><meta property="og:description" content="Table of Contents Introduccion" /><meta property="og:site_name" content="XCO" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-03-20T00:00:00-05:00" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"GitHub User"},"headline":"Découvrir Podman","dateModified":"2020-03-20T00:00:00-05:00","datePublished":"2020-03-20T00:00:00-05:00","description":"Table of Contents Introduccion","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"/container-podman/"},"url":"/container-podman/","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/icons/apple-touch-icon.png?v=qA3OXqyw77"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/icons/favicon-32x32.png?v=qA3OXqyw77"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/icons/favicon-16x16.png?v=qA3OXqyw77"><link rel="manifest" href="/assets/img/icons/manifest.json?v=qA3OXqyw77"><link rel="mask-icon" href="/assets/img/icons/safari-pinned-tab.svg?v=qA3OXqyw77" color="#5bbad5"> <!--[if IE]><link rel="shortcut icon" href="/assets/img/icons/favicon.ico?v=qA3OXqyw77"><![endif]--><link rel="shortcut icon" href="/assets/img/icons/favicon.ico?v=qA3OXqyw77"><meta name="apple-mobile-web-app-title" content="XCO"><meta name="application-name" content="XCO"><meta name="msapplication-config" content="/assets/img/icons/browserconfig.xml?v=qA3OXqyw77"><meta name="theme-color" content="#ffffff"><style class="inlineCSS"> h1{color:#313237;margin-top:0;margin-bottom:.5rem}.dark-bg{background-color:#313237}@media only screen and (min-width:48em){.post-card{width:48.4375%;margin-right:3.125%}.post-card:last-of-type,.post-card:nth-child(2n+2){margin-right:0}}html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figure,main{display:block}figure{margin:1em 40px}a{background-color:transparent;-webkit-text-decoration-skip:objects}img{border-style:none}svg:not(:root){overflow:hidden}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{-webkit-box-sizing:border-box;box-sizing:border-box}body{-webkit-overflow-scrolling:touch}*,::after,::before{-webkit-box-sizing:inherit;box-sizing:inherit}.site{display:-webkit-box;display:-ms-flexbox;display:flex;min-height:100vh;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.site__content{-webkit-box-flex:1;-ms-flex:1;flex:1}img{max-width:100%;height:auto;width:auto;vertical-align:middle}figure{margin:0}body{background-color:#fff;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Hiragino Sans GB","Microsoft YaHei","WenQuanYi Micro Hei",sans-serif;font-size:1rem;line-height:1.5;color:#343851;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%}p{margin-top:0;margin-bottom:1.25rem}h1,h2{color:#313237;margin-top:0;margin-bottom:.5rem}a{color:#277cea;text-decoration:none;border-bottom:1px dashed #277cea}.blur{background:#fff;filter:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg"><filter id="filter"><feGaussianBlur stdDeviation="16" /></filter></svg>#filter');-webkit-filter:blur(1rem);filter:blur(1rem)}.container{padding:0 20px;max-width:100%;margin:0 auto}@media only screen and (min-width:36em){.container{max-width:540px;margin:0 auto}}@media only screen and (min-width:48em){.container{max-width:720px;margin:0 auto}}@media only screen and (min-width:62em){.container{max-width:960px;margin:0 auto}}@media only screen and (min-width:75em){.container{max-width:1170px;margin:0 auto}}.header{background-color:#fff;color:#343851;position:absolute;z-index:4;width:100%;top:0;left:0;will-change:transform;-webkit-transform:translateY(0);transform:translateY(0)}.header a{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:0}.header__logo{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;overflow:hidden;padding:19px 0;margin-right:1.25rem;outline:0;border-bottom:0;color:#313237}.header__logo .header__logo--container{width:58px}.header__logo .header__logo--container .logo{fill:currentColor}.header__inner{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:3.75em;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.header__links{padding-bottom:.5rem;display:none;position:absolute;top:3.75em;left:0;width:100%;height:auto;background:#fff}.header__link{color:#343851;padding:.938rem 0;border-top:1px solid #ededed}.header__toggle{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:44px;height:100%;background-color:transparent;padding-left:1.25rem}.header__toggle span{display:block;position:relative;margin-top:4px;background-color:#343851;width:100%;height:2px;border-radius:1px}.header__toggle span:first-child{margin-top:0}@media (min-width:62em){.header__toggle{display:none;visibility:hidden}.header__links{position:static;padding:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;visibility:visible;width:auto;height:100%}.header__links-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;padding:0}.header__link{position:relative;padding:.938rem 1rem;border:0;height:100%}.header__link::after{content:"";display:block;position:absolute;left:0;bottom:0;height:3px;width:100%;-webkit-transform:scaleX(0);transform:scaleX(0);background:#277cea}}.post-card{display:block;position:relative;width:100%;min-height:250px;border-radius:4px;overflow:hidden;background-color:#fff;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.08);box-shadow:0 1px 3px rgba(0,0,0,.08);margin-bottom:2.25rem;border-bottom:0}@media only screen and (min-width:48em){.post-card{width:48.4375%;margin-right:3.125%}.post-card:nth-child(2n+2){margin-right:0}}@media only screen and (min-width:75em){.post-card{width:31.25%;margin-right:3.125%}.post-card:nth-child(2n+2){margin-right:3.125%}}.post-card__label{position:absolute;top:1.5rem;left:1.5rem;z-index:2}.post-card__inner{display:block;position:relative;padding:1.875rem 1.25rem .625rem;width:100%;color:#838c8d;border-bottom:0}.post-card__header{margin-bottom:.75rem}.post-card__meta{font-size:.875rem}.post-card__thumb{margin:0;background:#fff;position:relative;overflow:hidden}.post-card__thumb::after{content:"";display:block;height:0;width:100%;padding-bottom:56.25%}.post-card__thumb>*{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.label{padding:0 10px;margin-bottom:1rem;display:inline-block;line-height:20px;font-size:.75rem;text-transform:uppercase;letter-spacing:1px;color:rgba(255,255,255,.8);border:2px solid rgba(255,255,255,.5);border-radius:100px}.hero{margin:3.75rem auto 0;min-height:16.25rem;width:100%;position:relative;background-color:#dde5ea;background-repeat:no-repeat;background-position:50%;background-size:cover}@media only screen and (min-width:62em){.hero{margin:0 auto;height:36em}}.hero::before{position:absolute;display:block;content:"";top:0;left:0;width:100%;height:100%;background:rgba(52,56,81,.8)}.hero__wrap{position:absolute;margin:auto;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;color:rgba(255,255,255,.8);width:100%;max-width:90%;z-index:1}.hero__wrap .hero__title{font-size:1.8em;color:#fff}.blog{background-color:#f9f9f9}.post-list{padding-top:2.5em;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}@media only screen and (min-width:48em){.hero__wrap{max-width:40em}.hero__wrap .hero__title{padding:1rem 0;font-size:2.625em;line-height:3.125rem}.post-list{padding-top:5em}}</style><link rel="preload" href="/assets/css/main.css" as="style" onload="this.rel='stylesheet'"> <noscript><link rel="stylesheet" href="/assets/css/main.css"></noscript> <script type="text/javascript"> /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */ (function(w){"use strict";if(!w.loadCSS){w.loadCSS=function(){}} var rp=loadCSS.relpreload={};rp.support=(function(){var ret;try{ret=w.document.createElement("link").relList.supports("preload")}catch(e){ret=!1} return function(){return ret}})();rp.bindMediaToggle=function(link){var finalMedia=link.media||"all";function enableStylesheet(){link.media=finalMedia} if(link.addEventListener){link.addEventListener("load",enableStylesheet)}else if(link.attachEvent){link.attachEvent("onload",enableStylesheet)} setTimeout(function(){link.rel="stylesheet";link.media="only x"});setTimeout(enableStylesheet,3000)};rp.poly=function(){if(rp.support()){return} var links=w.document.getElementsByTagName("link");for(var i=0;i<links.length;i++){var link=links[i];if(link.rel==="preload"&&link.getAttribute("as")==="style"&&!link.getAttribute("data-loadcss")){link.setAttribute("data-loadcss",!0);rp.bindMediaToggle(link)}}};if(!rp.support()){rp.poly();var run=w.setInterval(rp.poly,500);if(w.addEventListener){w.addEventListener("load",function(){rp.poly();w.clearInterval(run)})}else if(w.attachEvent){w.attachEvent("onload",function(){rp.poly();w.clearInterval(run)})}} if(typeof exports!=="undefined"){exports.loadCSS=loadCSS} else{w.loadCSS=loadCSS}}(typeof global!=="undefined"?global:this)) </script></head><body class="site"><header class="header" itemscope itemtype="http://schema.org/SiteNavigationElement" aria-label="Main navigation"><div class="container"><div class="header__inner"> <a class="header__logo" href="/"> <!--<div class="header__logo--container"> <?xml version="1.0" encoding="UTF-8" standalone="no"?> <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"> <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="260px" height="260px" viewBox="0 0 260 260" enable-background="new 0 0 260 260" xml:space="preserve"> <image id="image0" width="260" height="260" x="0" y="0" xlink:href="data:image/png;base64,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" /> </svg></div>--> </a><nav class="header__links"><div class="container header__links-wrapper"> <a class="header__link" href="/" itemprop="url"> <span itemprop="name">Home</span> </a> <a class="header__link" href="/about" itemprop="url"> <span itemprop="name">About</span> </a></div></nav><div class="header__toggle"> <span></span> <span></span> <span></span></div></div></div></header><div class="hero lazyload" data-bg="/assets/img/posts//20200320/congy-yuan-Q3KK3lI9aDU-unsplash.jpg"><div class="hero__wrap"><div class="hero__categories"> <a class="label" href="/categories/#Container">Container</a> &nbsp; <a class="label" href="/categories/#Podman">Podman</a> &nbsp; <a class="label" href="/categories/#Français">Français</a></div><h1 class="hero__title">Découvrir Podman</h1><p class="hero__meta"> <span> <time>20 Mar 2020</time>&nbsp;&middot; </span> <span> 4 mins read </span></p></div></div><main class="site__content"><div class="container"><article class="post-content" itemprop="articleBody"><h5 id="table-of-contents">Table of Contents</h5><p><a href="#Intro">Introduccion</a></p><p><a href="#Instalation">Instalation</a></p><p><a href="#PremierTest">Premier test Hello-World</a></p><p><a href="#AjoutPod">Ajoutons un Pod</a></p><p><a href="#IntSystemd">Intégration avec systemd</a></p><p><a href="#PodaKube">Passage de Podman à Kubernetes</a></p><p><a href="#Podcompose">Passage de Docker-Compose Podman-Compose</a></p><hr /><p><a name="Intro"></a></p><h2 id="introduction">Introduction</h2><p>Nous sommes très nombreux surement à avoir utilisé pendant plusieurs années Docker, notamment sur des infrastructures personnelles (notebook, homeserver, etc). Suite à découvrir dans une installation de <a href="https:/kubic.opensuseorg/">OpenSUSE KUBIC</a> l’existence “Podman” j’ai eu envie d’en savoir plus. Podman est une alternative à Docker avec presque les même ligne de commande. La compatibilité est telle qu’il y a des personnes qui créent un alias afin de ne pas avoir à changer vos habitudes ni même vos scripts.</p><pre><code class="language-no-highlight">alias docker=podman
</code></pre><p>L’un des intérêts de podman est qu’il n’y a plus de daemon et tous les conteneurs sont lancés par runC sans dépendre d’un processus unique. De plus, il est possible de lancer des containeurs sans les droits root sur la machine. Un autre point important est de pouvoir gérer des Pods. Cette notion est par essence très importante dans Kubernetes, mais n’est pas du tout présente dans Docker.</p><p>c’est quoi un Pod? Un pod c’est tout simplement, un groupe de containers qui vont partager des informations entre eux.</p><p>Crédits: https://developers.redhat.com/blog/2019/01/15/podman-managing-containers-pods/</p><p><img src="https://developers.redhat.com/blog/wp-content/uploads/2019/01/podman-pod-architecture.png" alt="alt text" title="Pod containers" /></p><p><a name="Instalation"></a></p><h2 id="instalation">Instalation</h2><p>Le plus simple est de suivre <a href="https://podman.io/getting-started/installation.html">la documentation officielle</a>. Sur Ubuntu, il suffit d’ajouter le dépôt et de l’installer avec APT :</p><pre><code class="language-no-highlight">. /etc/os-release
echo "deb https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/xUbuntu_${VERSION_ID}/ /" | sudo tee /etc/apt/sources.list.d/devel:kubic:libcontainers:stable.list
curl -L https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/xUbuntu_${VERSION_ID}/Release.key | sudo apt-key add -
sudo apt-get update -qq
sudo apt-get -qq -y install podman
</code></pre><p><a name="PremierTest"></a></p><h2 id="premier-test-hello-world">Premier test Hello-world</h2><p>À ne pas s’inquiéter, les images et dépôts Docker sont compatibles</p><pre><code class="language-no-highlight">&gt; podman run hello-world
Trying to pull docker.io/library/hello-world...
Getting image source signatures
Copying blob 0e03gdck26e6 done  
Copying config bf857fh1qe done  
Writing manifest to image destination
Storing signatures

Hello from Docker!
This message shows that your installation appears to be working correctly.
</code></pre><p>Lister les conteneurs</p><pre><code class="language-no-highlight">&gt; podman ps -a
CONTAINER ID  IMAGE                                 COMMAND  CREATED             STATUS                         PORTS  NAMES
bf756fb1ae65  docker.io/library/hello-world:latest  /hello   About a minute ago  Exited (0) About a minute ago         compassionate_saha
</code></pre><p><a name="AjoutPod"></a></p><h2 id="ajoutons-un-pod">Ajoutons un Pod</h2><p>Pour l’instant tout cela ressemble plus à un équivalent de Docker et alors où sont les fameux Pod.</p><p>Pour cela nous alons contenir dans un pod les conteneurs suivants:</p><ul><li>Wordpress front</li><li>MySQL la base de données</li></ul><p>Tout d’abord nous allons creer le pod qui va contenir ces deux containers et en exposant le port 80 à l’extérieur. Cela permetra accèder à notre Wordpress.</p><pre><code class="language-no-highlight">podman pod create --name wordpress -p 8080:80
</code></pre><p>Le pod fut créé, vous pouvez le lister :</p><pre><code class="language-no-highlight">podman pod ls
POD ID        NAME       STATUS   CREATED         # OF CONTAINERS  INFRA ID
cd3f0446aa89  wordpress  Created  16 seconds ago  1                1e8214ce2b36
</code></pre><p>Si on exectute d’ailleur un ps comme dans Docker, Podman a crée en même temps que le pod un conteneur pour le gérer comme sur Kubernetes.</p><pre><code class="language-no-highlight">podman ps -a
CONTAINER ID  IMAGE                         COMMAND  CREATED             STATUS          PORTS                   NAMES
1e8214ce2b36  k8s.gcr.io/pause:3.2                   About a minute ago  Created         0.0.0.0:80-&gt;8080/tcp      cd3f0446aa89-infra

</code></pre><p>Ensuite nous pouvons créer les 2 conteneurs en les attachant au pod créé précédemment</p><ul><li>Pour le MySQL</li></ul><pre><code class="language-no-highlight">    podman run -d --pod wordpress -e MYSQL_DATABASE=wordpress -e MYSQL_ROOT_PASSWORD=root mysql:5.7 --default-authentication-plugin=mysql_native_password
</code></pre><ul><li>Pour le Wordpress</li></ul><pre><code class="language-no-highlight">    podman run -d --pod wordpress -e WORDPRESS_DB_HOST=127.0.0.1 -e WORDPRESS_DB_USER=root -e WORDPRESS_DB_PASSWORD=root -e WORDPRESS_DB_NAME=wordpress  wordpress:latest
</code></pre><p>Point important par rapport à Docker, pour interroger la base MySQL Wordpress se base sur le localhost (de la commande “WORDPRESS_DB_HOST=127.0.0.1”). Comme les deux conteneurs sont dans le même Pod vous pouvez donc communiquer directement sur cette interface. C’est à dire, vous pouvez vous lier à l’adresse localhost du pod et tous les conteneurs de ce pod pourront s’y connecter grâce au partage de l’espace réseau.</p><p>Nous pouvons maintenant utiliser votre instance Wordpress sur le port 8080 sur notre navegateur.</p><p><a name="IntSystemd"></a></p><h2 id="intégration-avec-systemd">Intégration avec systemd</h2><p>Nous avons notre pod actif et maintenant nous pouvons générer un fichiers de configuration systemd, afin de l’utiliser en tant que service.</p><pre><code class="language-no-highlight">$ podman generate systemd --new --name --files wordpress
</code></pre><p>Ajouter dans le repertoire /etc/systemd/system/ et lancer le service.</p><p><a name="PodaKube"></a></p><h2 id="passage-de-podman-à-kubernetes">Passage de Podman à Kubernetes</h2><p>Il existe une commande bien intéressante, qui permet l’export et l’import un manifest yml.</p><p>Pour exporter le manifest du pod ou SystemD, nous avons :</p><pre><code class="language-no-highlight">podman generate kube -f wordpress.yml wordpress
</code></pre><p>Pour faire l’inverse et importer à partir de fichier généré par Podman ou un fichier de Kubernetes.</p><pre><code class="language-no-highlight">podman play kube wordpress.yml
</code></pre><p>Une fois fini, il est possible de stopper le pod et le supprimer</p><pre><code class="language-no-highlight">podman pod stop wordpress
podman pod rm wordpress
</code></pre><p><a name="Podcompose"></a></p><h2 id="passage-de-docker-compose-podman-compose">Passage de Docker-Compose Podman-Compose</h2><p>Il est possible aussi avec un script d’exécuter docker-compose.yml en utilisant podman.</p><pre><code class="language-no-highlight">sudo curl -o /usr/local/bin/podman-compose https://raw.githubusercontent.com/con...
sudo chmod +x /usr/local/bin/podman-compose
podman-compose up -d
</code></pre><hr /><p>Thank you for the initial photo.</p><p><span>Photo by <a href="https://unsplash.com/@yuancongyi?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">congy yuan</a> on <a href="https://unsplash.com/s/photos/tins-of-sardines?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></span></p></article><div class="post-content controls__inner"><div class="controls__item prev"> <span>Previous</span> <a href="/primer-modelo-fastAI/"> <span> <svg xmlns="http://www.w3.org/2000/svg" width="6" height="11"><path fill="fillColor" d="M5.647 1.718c.37-.434.323-1.09-.106-1.465A1.016 1.016 0 0 0 4.095.36L.25 4.875a1.05 1.05 0 0 0 .017 1.378l3.95 4.407c.38.424 1.03.456 1.448.07a1.05 1.05 0 0 0 .07-1.468l-3.34-3.725 3.253-3.819z"/> </svg> </span> Primer modelo de Fast.ai </a></div><div class="controls__item next"> <span>Next</span> <a href="/saphana-podman/"> SapHana express avec Podman <span> <svg xmlns="http://www.w3.org/2000/svg" width="6" height="11"><path fill="#fillColor" d="M.353 9.282c-.37.434-.323 1.09.106 1.465a1.016 1.016 0 0 0 1.446-.107L5.75 6.125a1.05 1.05 0 0 0-.017-1.378L1.784.34A1.015 1.015 0 0 0 .336.27a1.05 1.05 0 0 0-.07 1.468l3.34 3.725L.353 9.282z"/> </svg> </span> </a></div></div></div></main><footer class="footer"><div class="container"><nav class="social"></nav><span>&copy; 2024 XCO. All rights reserved.</span></div></footer><script async src="/assets/js/bundle.js"></script> <script async> if ('serviceWorker' in navigator) { navigator.serviceWorker.register('/sw.js').then(function( registration ) { console.log('ServiceWorker registration successful with scope: ', registration.scope); }) .catch(function(error) { console.log('ServiceWorker registration failed: ', error); }); } </script></body></html>
